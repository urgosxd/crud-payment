<h1>LOAN App</h1>

<div class="container">
  <div class="list-panel">
    <app-loan-list [loans]="loans()" (loanSelected)="onLoanSelected($event)"></app-loan-list>
    <button (click)="newLoan()" class="new-loan-btn">New Loan</button>
  </div>
  <div class="detail-panel">
    @if (loading()) {
      <p class="loading-message">Loading loans...</p>
    }
    @if (selectedLoan(); as loan) {
      @if (editing()) {
        <app-loan-edit [loan]="loan" (save)="saveLoan($event)" (cancel)="cancelEdit()"></app-loan-edit>
      } @else {
        <app-loan-detail [loan]="loan"></app-loan-detail>
        @if (confirmingDelete()) {
          <div class="confirm-delete">
            <p>Are you sure you want to delete this loan?</p>
            <button (click)="confirmDelete()" class="confirm-btn">Yes, Delete</button>
            <button (click)="cancelDelete()" class="cancel-btn">No, Cancel</button>
          </div>
        } @else {
          <button (click)="editLoan()">Edit</button>
          <button (click)="requestDelete()" class="delete-btn">Delete</button>
        }
      }
    } @else if (error()) {
      <div class="error-message">
        <h2>Error</h2>
        <p>{{ error() }}</p>
      </div>
    } @else {
      <p>Select a loan to see the details.</p>
    }
  </div>
</div>
